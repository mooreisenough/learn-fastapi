image:
  file: .gitpod.Dockerfile
ports:
    - port: 8000
      onOpen: ignore
      visibility: public
    - port: 5432
      onOpen: ignore
      visibility: public
    - port: 5050
      onOpen: ignore
      visibility: public
    - port: 7474
      onOpen: ignore
      visibility: public
    - port: 7687
      onOpen: ignore
      visibility: private
tasks:
  - init: |
      (cp -n .env.example .env || true) 
      docker-compose build
    command: |
      poetry config virtualenvs.in-project true
      poetry shell 
      source .venv/bin/activate 
      poetry install 
      docker-compose up

github:
  prebuilds:
    # enable for the master/default branch (defaults to true)
    main: false

vscode:
  extensions:
    - ms-python.python